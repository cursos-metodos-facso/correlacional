---
title: "Evaluación 2 - Estadística Correlacional 2024 "
date: "2024-10-22"
lang: es
execute:
  freeze: auto
  cache: false 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
    warning = F,
    error = F,
    message = F
)
```

```{r paquetes, include=FALSE}
if (!require("pacman")) install.packages("pacman")

pacman::p_load(
    tidyverse,
    sjmisc,
    sjPlot,
    kableExtra,
    sjlabelled,
    naniar
)

options(scipen = 999)
rm(list = ls())
```

```{r, include=FALSE}
load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/dataset1.RData"))
load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/dataset2.RData"))
load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/dataset3.RData"))
load(url("https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/dataset4.RData"))
```

Imagine que usted es parte de un equipo de investigación de un centro de estudios sociales. Actualmente, el centro está llevando a cabo una investigación que se guía por las siguientes preguntas:

- **Pregunta 1:** ¿En qué medida se relaciona la clase social subjetiva de las personas con sus niveles de autoritarismo?
- **Pregunta 2:** ¿En qué medida se relaciona el tener educación universitaria o más con la posición política de las personas?

Las cuales tienen las siguientes hipótesis de investigación:

> H1: A mayor clase social subjetiva, mayores son los niveles de autoritarismo
> H2: Existe asociación entre el tener educación universitaria o más y la posición política de las personas

Como sociólogo experto en manejo de datos y análisis cuantitativo, a usted se le ha encargado realizar un reporte que permita responder estas preguntas. Para esta tarea usted cuenta con la base de datos [{{< fa table >}} `DATOS2024`](https://github.com/cursos-metodos-facso/datos-ejemplos/raw/refs/heads/main/dataset1.RData). Esta base cuenta con 1000 casos y 7 variables, las cuales son:

  - `id`: Identificador único de la encuesta
  - `clase_subj`: Clase social subjetiva
  - `autoritarismo`: Autoritarismo
  - `educ`: Nivel educacional
  - `pos_pol`: Posición política
  - `educ_rec`: Nivel educacional recodificada (universitario o más)
  - `pos_pol_rec`: Posición política recodificada

# Primera sección

En esta primera sección, usted debe responder la **Pregunta 1** y la hipótesis **H1**.

## Pregunta 1.1

A través del software R, a) cálcule un coeficiente de correlación (Pearson, Spearman o Kendall) para `clase_subj` y `autoritarismo` y b) genere un diagrama de dispersión entre estas variables. (1p)

## Pregunta 1.2 

Justifique el coeficiente de correlación escogido. (1p)

## Pregunta 1.3 

Interprete el coeficiente de correlación y el diagrama de dispersión. Incluya la magnitud del coeficiente, el sentido de la dirección y la inferencia estadística en su respuesta. Considerando esta evidencia, responda la pregunta de investigación (**Pregunta 1**) y la hipótesis alternativa (**H1**). (2p)

# Segunda sección

Imagine usted que, en la base de datos `dataset` (n = 1.000) que está usando para su investigación, las variables `clase_subj`, `pos_pol` y `autoritarismo` fueron re-codificadas de tal manera que las categorías de respuesta "No sabe/No responde" fueron convertidas a casos pérdidos (`NA`). Con esta recodificación, la distribución de los casos pérdidos en las variables de esta base de datos es la siguiente:

```{r, include=FALSE}

tab_perdidos <- data.frame(
    var = c("educ", "clase_subj", "pos_pol", "autoritarismo"),
    label = c("Nivel educacional", "Clase social subjetiva", "Posición política", "Autoritarismo"),
    n_perdidos = c(0, 10, 150, 20),
    porc_perdidos = c("0%", "1%", "15%", "2%")
)

tab_perdidos %>%
    kable(format = "html", align = "r", col.names = c("Variable", "Etiqueta", "n casos perdidos", "% casos perdidos")) %>%
    kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = T) %>%
    kableExtra::kable_styling(latex_options = "hold_position", position = "center")
```

A raíz de esta información, responda las siguientes preguntas:

## Pregunta 2.1

Utilice el software R para calcular una matriz de correlación con las variables `educ`, `clase_subj`, `pos_pol` y `autoritarismo`, considerando el tratamiento de sus casos pérdidos. Reporte sus resultados en una tabla o un gráfico. (1p)

## Pregunta 2.2

Interprete los resultados obtenidos en la matriz de correlación tanto en términos de magnitud de los coeficientes, así como también en términos de significancia estadística. (1p)

## Pregunta 2.3

Justifique y explique el método de tratamiento de casos pérdidos que utilizó para estimar la matriz de correlación. (2p)

# Tercera sección

Para esta pregunta me sumo a la base de datos con dos variables, una de dos categorías y una de tres (alta/baja educación, y izquierda-centro-derecha, o algo así)

3.1. Código de tabla, código de cálculo  de prueba estadística correspondiente (1)
3.2 Interpretación, considerando inferencia estadística (2) y magnitud de efecto  (1)

