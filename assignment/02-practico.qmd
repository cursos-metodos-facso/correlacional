---
title: "Práctico 2: Intentando rechazar"
date: "2024-09-03"
lang: es
execute:
  freeze: auto
  cache: false 
---

![](https://correlacional.netlify.app/slides/img/rechazar_meme.png)

En este práctico vamos a realizar una serie de ejercicios de inferencia, tomando como base todos los contenidos de la **Unidad 1**

# Ejercicio 1

Este ejercicio está basado en un ejemplo de clases, y está desarrollado para que sirva de ejemplo a los siguientes ejercicios que deben ser desarrollados de manera autónoma.

La pregunta de investigaciónwa: ¿Es el salario de los hombres mayor que el de las mujeres? Para poder contrastar esta hipótesis vamos a hacer un subset de datos de la CASEN 2022 de 1500 casos:

```{r warning=FALSE }
pacman::p_load(sjmisc, haven, dplyr, stargazer, kableExtra)
load("../slides/casen2022_inf2.Rdata")
  options(scipen=999) # para evitar notación en los ceros
set.seed(20) # para fijar el resultado aleatorio
casen_1500 <-  #objeto generado con 1500 casos
  casen2022_inf %>% # a partir de esta base de datos (CASEN completa)
  select(salario,sexo)  %>% # seleccion de variabls
  sample_n(1500) # número de casos a seleccionar
casen_1500 <- na.omit(casen_1500) # quitar valores perdidos
```

:::
**Los # en el código**
En este código y siguientes aparecen varios #, que son una función de comentarios en R. No son necesarios para que el código funcione, pero son útiles en este caso para poder explicar que función cumple cada sección del código. Todo lo que aparece a la derecha de un # no es leído por el programa.
:::

Generamos tabla para visualizar la distribución de los datos
```{r}
casen_1500%>% # se especifica la base de datos
   dplyr::group_by(sexo=sjlabelled::as_label(sexo)) %>% # se agrupan por la variable categórica y se usan sus etiquetas con as_label
  dplyr::summarise(Obs.=n(),Promedio=mean(salario, na.rm=TRUE),SD=sd(salario, na.rm=TRUE)) %>% # se agregan las operaciones a presentar en la tabla
  kable(, format = "markdown") # se genera la tabla
```

Ahora vamos con los [5 pasos de la inferencia](https://correlacional.netlify.app/slides/05-inferencia4.html#33)

## 1. Formulación de hipótesis

El primer aspecto a establecer es el tipo de hipótesis a formular: ¿Direccional o no direccional? En este caso, la pregunta indica una direccionalidad ("mayor que"), por lo tanto corresponde a una hipótesis direccional. Si hubiera sido una pregunta que hiciera referencia simplemente a diferencias ("¿Es el salario de los hombres distinto al de las mujeres?) correspondería a una hipótesis no direccional.

La hipótesis general es que el salario de los hombres es mayor que el de las mujeres. Pasando a lenguaje de hipótesis, esto se plantea como:

Hipótesis alternativa:

- $H_A$: Promedio salarial hombres ( $\bar{X}_{hombres}$) - Promedio salarial mujeres ( $\bar{X}_{mujeres}$) > 0

Hipótesis nula:

- $H_0$: $\bar{X}_{hombres} - \bar{X}_{mujeres} \leq 0$

## Pasos 2, 3 y 4 de una vez con R

En clases vimos que los pasos 2, 3 y 4 corresponden a: 

2. Obtener error estándar y estadístico de prueba empírico correspondiente (ej: Z o t)

3. Establecer la probabilidad de error $\alpha$ (usualmente 0.05) y obtener valor crítico (teórico) de la prueba correspondiente

4. Cálculo de intervalo de confianza / contraste valores empírico/crítico

Esta secuencia de pasos tiene un sentido pedagógico para poder entender cómo finalmente se llega a interpretar el contraste de hipótesis en el paso 5. Pero en análisis de datos, luego de establecer las hipótesis nos vamos directamente al código que nos permite obtener de una vez toda la información de los pasos 2, 3 y 4:


```{r}
test_ej1 <- t.test(
  salario ~ sexo, 
  data = casen_1500, 
  alternative="greater", 
  var.equal=TRUE, 
  conf.level = 0.95)

test_ej1
```

También podemos visualizarlo en una tabla más amable:

```{r}
pacman::p_load(rempsyc, broom)
tabla_ej1 <- tidy(test_ej1)
#nice_table(tabla_ej1, broom = "t.test") # no funciona al renderizar en Quarto, si en R ... es un issue por lo visto, algunos foros de esto
```



## 5. Interpretación 


# Ejercicio 2


# Ejercicio 3
